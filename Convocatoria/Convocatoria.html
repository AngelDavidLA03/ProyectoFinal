<!DOCTYPE html>
<html>
  <head>
    <title>Convocatorias y alumnos</title>
    <link rel="stylesheet" href="stylegaleriaconvocatoria.css">
  </head>
  <body>
    <header>
      <div class="container">
        <nav>
          <ul>
                      <li><a href="../accounts.html">Cuenta</a></li>
                      <li><a href="../AlumnoServicio/Alumnosenservicio.php">Alumnos en Servicio</a></li>
                      <li><a href="../ConvocatoriasNuevas/NuevaConvocatoria.php">Solicitud</a></li>
                      <li><a href="../Convocatoria/Convocatoria.html">Convocatorias</a></li>
                      <li><a href="../accounts.html">Cerrar Sesión</a></li>
                  </ul>
              </nav>
          </div>
      </header>
  </head>
  <body>
    <div class="card">
      <label for="convocatorias">Convocatorias disponibles:</label>
      <select id="convocatorias" class="convocatorias">
        <option value="1">Convocatoria 1</option>
        <option value="2">Convocatoria 2</option>
        <option value="3">Convocatoria 3</option>
        <option value="4">Convocatoria 4</option>
        <option value="5">Convocatoria 5</option>
      </select>
    </div>
    
    <div class="card" id="alumnos-card">
      <h2>Alumnos inscritos</h2>
      <ul class="alumnos" id="alumnos-list">
      </ul>
    </div>
    <script>
      // Seleccionar los botones de convocatoria y agregar un evento de clic
const convocatorias = document.querySelectorAll(".convocatoria");
convocatorias.forEach((convocatoria) => {
  convocatoria.addEventListener("click", () => {
    // Obtener el ID de la convocatoria seleccionada
    const id = convocatoria.getAttribute("data-id");
    // Hacer una solicitud a una API para obtener la lista de alumnos inscritos
    fetch(`https://api.example.com/convocatorias/${id}/alumnos`)
      .then((response) => response.json())
      .then((data) => {
        // Limpiar la lista de alumnos
        const alumnosList = document.getElementById("alumnos-list");
        alumnosList.innerHTML = "";
        // Agregar cada alumno a la lista
        data.forEach((alumno) => {
          const alumnoItem = document.createElement("li");
          const alumnoLink = document.createElement("a");
          alumnoLink.innerText = alumno.nombre;
          alumnoLink.setAttribute("data-id", alumno.id);
          alumnoLink.addEventListener("click", (event) => {
            event.preventDefault();
            // Obtener el ID del alumno seleccionado
            const id = event.target.getAttribute("data-id");
            // Hacer una solicitud a una API para obtener la información del alumno
            fetch(`https://api.example.com/alumnos/${id}`)
              .then((response) => response.json())
              .then((data) => {
                // Mostrar la información del alumno en una alerta
                alert(`Nombre: ${data.nombre}\nEmail: ${data.email}\nTeléfono: ${data.telefono}`);
              });
          });
          alumnoItem.appendChild(alumnoLink);
          alumnosList.appendChild(alumnoItem);
        });
        // Mostrar la tarjeta de alumnos
        const alumnosCard = document.getElementById("alumnos-card");
        alumnosCard.style.display = "block";
      });
  });
});
